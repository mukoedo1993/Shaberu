<%- include('includes/header') %> <!--ejs function whose name is include -->
<!--
    equal sign here will escape the value, which is unnecessary here. So we use the minus sign here.
-->
  
  <div class="container py-md-5 container--narrow">


    <%- include('includes/flash') %>
    
    <% if(posts.length) { %>

      <h2 class="text-center mb-4"> The Latest From Those You Follow  </h2>

      <div class="list-group">
        <% posts.forEach(function (post){ %>
            <a href="/post/<%= post._id %>" class="list-group-item list-group-item-action">
                <img class="avatar-tiny" src="<%= post.author.avatar %>">
                <strong><%= post.title %></strong> <span class="text-muted small"> by <%= post.author.username %>on <%= post.createdDate.getMonth() + 1 %>/<%= post.createdDate.getDate() %>/<%= post.createdDate.getFullYear() %> </span>
              </a>
        <%  })%>
    </div>
    <% } else { %>
      <div class="text-center">
        <h2>Hello <strong><%= user.username %></strong>, your feed is empty.</h2> <!--This line, we run some javascript by adding percent equal percent icons
        
        course 71st: instead of a simple object username, we now want to access the user object with the property username.
        -->
        <p class="lead text-muted">Your feed displays the latest posts from the people you follow. If you don&rsquo;t have any friends to follow that&rsquo;s okay; you can use the &ldquo;Search&rdquo; feature in the top menu bar to find content written by people with similar interests and then follow them.</p>
      </div>  

    <% } %>
  </div>
  
  <%- include('includes/footer') %>